{#
  Template: Report 5 — Aircraft monthly activity
  Purpose: Display monthly activity per aircraft, including completed/cancelled counts,
           utilization percentage (by active days), and the dominant routes for that aircraft-month.
#}
{% extends "base.html" %}

{% block content %}
<div class="page-card">
    <div class="page-header-row">
        <h1 class="page-title">Report 5: Aircraft monthly activity</h1>
        <div>
            <a href="{{ url_for('main.manager_reports_menu') }}" class="btn-secondary">
                All reports
            </a>
            <a href="{{ url_for('main.manager_home') }}" class="btn-small">
                Manager dashboard
            </a>
        </div>
    </div>

    <p class="subtitle">
        Activity summary per aircraft and finished month: completed vs. cancelled flights,
        utilization rate and dominant routes (based on completed flights only; ties may show multiple routes).
        <br>
        <span class="field-hint">
            Utilization (%) is calculated as: (Active days in the month ÷ 30) × 100.
            An “active day” is a calendar day with at least one flight that is not <code>Cancelled</code>
            (departure day counts; arrival day counts too if it is on a different day).
        </span>
    </p>

    {% if records %}
    <div class="table-wrapper" style="max-height: 480px; overflow-y: auto;">
        <table class="data-table">
            <thead>
                <tr>
                    <th>Aircraft ID</th>
                    <th>Manufacturer</th>
                    <th>Model</th>
                    <th>Month</th>
                    <th>Flights completed</th>
                    <th>Flights cancelled</th>
                    <th>Total flights</th>
                    <th>Utilization (%)</th>
                    <th>Dominant routes</th>
                </tr>
            </thead>
            <tbody>
                {% for r in records %}
                <tr>
                    <td>{{ r.Aircraft_id }}</td>
                    <td>{{ r.Manufacturer }}</td>
                    <td>{{ r.Model }}</td>
                    <td>{{ r.Month }}</td>
                    <td>{{ r.Flights_Completed }}</td>
                    <td>{{ r.Flights_Cancelled }}</td>
                    <td>{{ r.Total_Flights }}</td>
                    <td>{{ r.Utilization_Percent }}</td>
                    <td>{{ r.Dominant_Routes or '-' }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <p>No aircraft activity data available.</p>
    {% endif %}
</div>
{% endblock %}
